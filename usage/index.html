
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../installation/">
      
      
        <link rel="next" href="../contributors/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Usage - FilterWhere</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  <script type="text/javascript">
    var _paq = window._paq = window._paq || [];
    _paq.push(['setDocumentTitle', 'FilterWhere' + '/' + document.title.replace(' - FilterWhere', '')]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
        var u="//matomo.treehillstudio.com/";
        _paq.push(['setTrackerUrl', u+'matomo.php']);
        _paq.push(['setSiteId', 40]);
        var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
        g.type='text/javascript'; g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
<link href="../assets/stylesheets/treehillstudio.css" rel="stylesheet">

   <link href="../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../assets/javascripts/glightbox.min.js"></script></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
    <div class="ths-header__above">
  <div class="md-header__inner md-grid">
    <div class="px-2 sm:px-6 lg:px-8 ths-header">
      <div class="flex h-24 items-center justify-between relative ths-header__outer">
        <div class="flex flex-1 items-center justify-center md:items-stretch md:justify-start ths-header__inner">
          <div class="flex flex-shrink-0 items-center ths-header__icon">
            <a href="https://treehillstudio.com/">
              <img alt="Treehill Studio" class="block h-12 lg:hidden w-auto ths-header__icon-mark" src="../assets/images/treehill-studio-mark.svg">
              <img alt="Treehill Studio" class="h-16 hidden lg:block w-auto ths-header__icon-default" src="../assets/images/treehill-studio-invers.svg">
            </a>
          </div>
          <div class="flex-grow hidden md:block md:ml-6 ths-header__menu-outer">
            <div class="flex justify-end mt-6 space-x-4 ths-header__menu-inner">
              <a class="border-b border-green border-opacity-0 font-bold hover:border-opacity-100 hover:text-white text-gray-300 text-sm uppercase ths-header__menu-item" href="https://treehillstudio.com/documentation.html">Documentation Overview</a>
              <a class="border-b border-green border-opacity-0 font-bold hover:border-opacity-100 hover:text-white text-gray-300 text-sm uppercase ths-header__menu-item" href="https://treehillstudio.com/about.html">About Treehill Studio</a>
              <a class="border-b border-green border-opacity-0 font-bold hover:border-opacity-100 hover:text-white text-gray-300 text-sm uppercase ths-header__menu-item" href="https://treehillstudio.com/donate.html">Donate</a>
              <a class="border-b border-green border-opacity-0 font-bold hover:border-opacity-100 hover:text-white text-gray-300 text-sm uppercase ths-header__menu-item" href="https://treehillstudio.com/imprint.html">Imprint</a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
    

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="FilterWhere" class="md-header__button md-logo" aria-label="FilterWhere" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            FilterWhere
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Usage
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/Jako/FilterWhere" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Jako/FilterWhere
  </div>
</a>
      </div>
    
  </nav>
  
</header>

    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="FilterWhere" class="md-nav__button md-logo" aria-label="FilterWhere" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    FilterWhere
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/Jako/FilterWhere" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Jako/FilterWhere
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Description
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Usage
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Snippets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filtergetresourceswhere" class="md-nav__link">
    <span class="md-ellipsis">
      FilterGetResourcesWhere
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operators" class="md-nav__link">
    <span class="md-ellipsis">
      Operators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operator-options" class="md-nav__link">
    <span class="md-ellipsis">
      Operator Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-array" class="md-nav__link">
    <span class="md-ellipsis">
      In Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#range" class="md-nav__link">
    <span class="md-ellipsis">
      Range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daterange" class="md-nav__link">
    <span class="md-ellipsis">
      Daterange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geocode" class="md-nav__link">
    <span class="md-ellipsis">
      Geocode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-settings" class="md-nav__link">
    <span class="md-ellipsis">
      System Settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributors
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    <span class="md-ellipsis">
      Introduction
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snippets" class="md-nav__link">
    <span class="md-ellipsis">
      Snippets
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Snippets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#filtergetresourceswhere" class="md-nav__link">
    <span class="md-ellipsis">
      FilterGetResourcesWhere
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#operators" class="md-nav__link">
    <span class="md-ellipsis">
      Operators
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Operators">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#operator-options" class="md-nav__link">
    <span class="md-ellipsis">
      Operator Options
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#in-array" class="md-nav__link">
    <span class="md-ellipsis">
      In Array
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#range" class="md-nav__link">
    <span class="md-ellipsis">
      Range
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#daterange" class="md-nav__link">
    <span class="md-ellipsis">
      Daterange
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geocode" class="md-nav__link">
    <span class="md-ellipsis">
      Geocode
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#system-settings" class="md-nav__link">
    <span class="md-ellipsis">
      System Settings
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


  <h1>Usage</h1>

<h2 id="introduction">Introduction</h2>
<p>With this MODX Revolution extra you can generate a xPDO where clause on base of
request parameters. This where clause can i.e. be used as pdoRessources or
getResources where property. That way you can filter MODX resources with request
parameters.</p>
<h2 id="snippets">Snippets</h2>
<h3 id="filtergetresourceswhere">FilterGetResourcesWhere</h3>
<p>The FilterGetResourcesWhere snippet creates a where clause that can i.e. be used
as pdoRessources or getResources where property. It has to be called uncached to
work on the request values.</p>
<p>The Snippet uses the following properties:</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>emptyRedirect</td>
<td>ID of a resource, the user is redirected to, when the generated where clause is empty.</td>
<td>-</td>
</tr>
<tr>
<td>fields</td>
<td>JSON encoded array of ‘filter =&gt; resourcefield’ combinations.</td>
<td>-</td>
</tr>
<tr>
<td>options</td>
<td>JSON encoded array of filter operator options.</td>
<td>-</td>
</tr>
<tr>
<td>toPlaceholder</td>
<td>If set, the snippet result will be assigned to this placeholder instead of outputting it directly.</td>
<td>-</td>
</tr>
<tr>
<td>type</td>
<td>Type of the xPDO clause to filter the resources. Can be set to ‘where’ or ‘having’. Defaults to ‘where’.</td>
<td>where</td>
</tr>
<tr>
<td>varName</td>
<td>Name of the superglobal variable that is searched for the filter values.</td>
<td>REQUEST</td>
</tr>
<tr>
<td>where</td>
<td>JSON encoded xPDO where clause to filter the resources.</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>The fields property uses the following syntax:</p>
<div class="highlight"><pre><span></span><code>{&quot;&lt;request_key&gt;&quot;:&quot;&lt;resource_fields&gt;::&lt;operator&gt;::&lt;junction&gt;&quot;}
</code></pre></div>
<p><code>request_key</code> contains the request key from which the value is retrieved.
<code>resource_fields</code> contains a comma separated list of resource fields which are
searched by the value. <code>operator</code> is optional and contains the xPDO query
operator like <code>=</code>, <code>&gt;</code>, <code>LIKE</code> etc. It defaults to <code>=</code>. If the operator is
<code>LIKE</code>, the searched value is surrounded with <code>%</code>, to create a wildcard search
in the resource fields. <code>junction</code> is optional and can be set to define the
junction between two search query parts. It defaults to empty, which means <code>AND</code>
in an xPDO where clause.</p>
<p>The sanitized values of each request key is set as placeholder in <code>&lt;key&gt;_value</code>.</p>
<p>Using the <code>where</code> property, you can combine the created where clause with an
additional where clause created i.e. with <code>TaggerGetResourcesWhere</code>.</p>
<h2 id="operators">Operators</h2>
<p>FilterWhere can use the default xPDO operators like </p>
<p><code>=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>, <code>!=</code>, <code>LIKE</code> and <code>IN</code></p>
<p>If the operator <code>LIKE</code> is used, the query value is surrounded with <code>%</code>. If the
operator <code>IN</code> is used, you maybe have to surround each requested value with
quotes, if request values are not an array.</p>
<p>There are some additional operators available with FilterWhere:</p>
<ul>
<li>
<p><code>RANGE</code>: The requested value is separated at a <code>-</code> sign. The first part is used 
  as the start of the range and the last part as the end of the range.</p>
</li>
<li>
<p><code>DATE</code>: The requested value will be parsed as <a href="https://www.php.net/manual/en/datetime.formats.php">valid date/time
  string</a>. The resulting
  value will be used as the start of a date range. The value plus one day will
  be used as the end of a date range. The start and end date can be formatted
  with the <code>dateformat</code> option or set to <code>unixtime</code>.</p>
</li>
<li>
<p><code>DATERANGE</code>: The requested value will be separated by a string referenced in
  the <code>daterangeseparator</code> option. The two parts are parsed as <a href="https://www.php.net/manual/en/datetime.formats.php">valid date/time
  string</a>. The resulting
  first two values will be used as the start and the end of a date range. The
  start and end date can be formatted with the <code>dateformat</code> option or set to
  <code>unixtime</code>.</p>
</li>
<li>
<p><code>GEOCODE</code>: The requested value will be geocoded with Google Maps Geocoding
  (the API Key has to be set in the system settings). The distance from the
  resulting value to the location given by two values in the resource (lat/lng
  separated by <code>||</code>) is calculated. This distance has to be smaller than the
  requested <code>distance</code> value.</p>
</li>
</ul>
<h3 id="operator-options">Operator Options</h3>
<p>FilterGetResourcesWhere uses the following operator options in a JSON encoded
value in the <code>options</code> property:</p>
<table>
<thead>
<tr>
<th>Option</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>daterangeseparator</td>
<td>The string, the requested value is separated with when the <code>DATERANGE</code> operator is used.</td>
<td><code>-</code></td>
</tr>
<tr>
<td>dateformat</td>
<td>The values in start and end date can be formatted with the <code>dateformat</code> option or set to <code>unixtime</code>.</td>
<td><code>Y-m-d H:i:s</code></td>
</tr>
</tbody>
</table>
<h2 id="examples">Examples</h2>
<h3 id="in-array">In Array</h3>
<p>Create a form on a page and prepend it with a FilterGetResourcesWhere call:</p>
<div class="highlight"><pre><span></span><code>[[!FilterGetResourcesWhere?
&amp;fields=`{ &quot;resource&quot;:&quot;alias::IN&quot; }`
&amp;toPlaceholder=`resourceswhere`
]]
&lt;form method=&quot;get&quot; action=&quot;[[~[[*id]]]]&quot;&gt;
    &lt;div&gt;
        &lt;input type=&quot;checkbox&quot; name=&quot;resource[]&quot; value=&quot;foo&quot; [[!+resource_value:FormItIsChecked=`foo`]]&gt;
        &lt;label&gt;Foo&lt;/label&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;input type=&quot;checkbox&quot; name=&quot;resource[]&quot; value=&quot;bar&quot; [[!+resource_value:FormItIsChecked=`bar`]]&gt;
        &lt;label&gt;Bar&lt;/label&gt;
    &lt;/div&gt;
&lt;/form&gt;
</code></pre></div>
<p>This form will filter a getResources snippet call showing only resources with
the <code>alias</code> 'foo' and/or 'bar', if one checkbox is enabled.</p>
<h3 id="range">Range</h3>
<p>Create a form on a page and prepend it with a FilterGetResourcesWhere call:</p>
<div class="highlight"><pre><span></span><code>[[!FilterGetResourcesWhere?
&amp;fields=`{ &quot;count&quot;:&quot;count::RANGE&quot; }`
&amp;toPlaceholder=`resourceswhere`
]]
&lt;form method=&quot;get&quot; action=&quot;[[~[[*id]]]]&quot;&gt;
    &lt;div&gt;
        &lt;input type=&quot;checkbox&quot; name=&quot;count&quot; value=&quot;0-2&quot; [[!+count_value:eq=`0-2`:then=`checked`:else=``]]&gt;
        &lt;label&gt;Count 0-2&lt;/label&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;input type=&quot;checkbox&quot; name=&quot;count&quot; value=&quot;2-4&quot; [[!+count_value:eq=`2-4`:then=`checked`:else=``]]&gt;
        &lt;label&gt;Count 2-4&lt;/label&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;input type=&quot;checkbox&quot; name=&quot;count&quot; value=&quot;4-&quot; [[!+count_value:eq=`4-`:then=`checked`:else=``]]&gt;
        &lt;label&gt;Count 4+&lt;/label&gt;
    &lt;/div&gt;                          
&lt;/form&gt;
</code></pre></div>
<p>This form will filter a getResources snippet call showing resources if the TV
value <code>count</code> is inside the range, if one checkbox is enabled.</p>
<h3 id="daterange">Daterange</h3>
<p>Create a form on a page and prepend it with a FilterGetResourcesWhere call:</p>
<div class="highlight"><pre><span></span><code>[[!FilterGetResourcesWhere?
&amp;fields=`{ &quot;daterange&quot;:&quot;publishedon::DATERANGE&quot; }`
&amp;options=`{ &quot;daterangeseparator&quot;:&quot; - &quot;, &quot;dateformat&quot;:&quot;unixtime&quot; }`
&amp;toPlaceholder=`resourceswhere`
]]
&lt;form method=&quot;get&quot; action=&quot;[[~[[*id]]]]&quot;&gt;
    &lt;div&gt;
        &lt;input type=&quot;text&quot; name=&quot;daterange&quot; value=&quot;[[!+daterange_value]]&quot;&gt;
        &lt;label&gt;Daterange&lt;/label&gt;
    &lt;/div&gt;
&lt;/form&gt;
</code></pre></div>
<p>This form will filter a getResources snippet call showing resources in the
daterange set in the daterange input (Example value: <code>2023-12-01 - 2023-12-30</code>).</p>
<p>If the second part of the daterange is not set, the range has no end.</p>
<h3 id="geocode">Geocode</h3>
<p>Create a form on a page and prepend it with a FilterGetResourcesWhere call:</p>
<div class="highlight"><pre><span></span><code>[[!FilterGetResourcesWhere?
&amp;fields=`{ &quot;geolocation&quot;:&quot;lat||lng::GEOCODE&quot; }`
&amp;toPlaceholder=`resourceswhere`
]]
&lt;form method=&quot;get&quot; action=&quot;[[~[[*id]]]]&quot;&gt;
    &lt;div&gt;
        &lt;input type=&quot;text&quot; name=&quot;geolocation&quot; value=&quot;[[!+geolocation_value]]&quot;&gt;
        &lt;select name=&quot;distance&quot;&gt;
            &lt;option selected=&quot;true&quot; disabled [[!+distance_value:FormItIsSelected=``]]&gt;Distance&lt;/option&gt;
            &lt;option value=&quot;5&quot; [[!+distance_value:FormItIsSelected=`5`]]&gt;5 km&lt;/option&gt;
            &lt;option value=&quot;10&quot; [[!+distance_value:FormItIsSelected=`10`]]&gt;10 km&lt;/option&gt;
            &lt;option value=&quot;25&quot; [[!+distance_value:FormItIsSelected=`25`]]&gt;25 km&lt;/option&gt;
            &lt;option value=&quot;50&quot; [[!+distance_value:FormItIsSelected=`50`]]&gt;50 km&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;                          
&lt;/form&gt;
</code></pre></div>
<p>This form will filter a getResources snippet call showing resources with a max
distance around the geocoded value, if the geocoded value is has a result and
the distance is set. Otherwise, the result is empty.</p>
<p>All forms use the following getResources snippet call.</p>
<div class="highlight"><pre><span></span><code>[[!getResources?
...
&amp;where=`[[!+resourceswhere]]`
]]
</code></pre></div>
<h2 id="system-settings">System Settings</h2>
<p>FilterWhere uses the following system settings in the namespace <code>filterwhere</code>:</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Name</th>
<th>Description</th>
<th>Default</th>
</tr>
</thead>
<tbody>
<tr>
<td>filterwhere.debug</td>
<td>Debug</td>
<td>Log debug information in the MODX error log.</td>
<td>No</td>
</tr>
<tr>
<td>filterwhere.google_maps_api_key</td>
<td>Google Maps Geocoding API Key</td>
<td><a href="https://developers.google.com/maps/documentation/javascript/get-api-key">Request</a> a Google Maps API Key with enabled Geocoding API.</td>
<td>-</td>
</tr>
<tr>
<td>filterwhere.google_maps_region</td>
<td>Google Maps API Region Code Biasing</td>
<td><a href="https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingRegionCodes">Preferred region</a> for the geocoding result.</td>
<td>-</td>
</tr>
</tbody>
</table>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2021-2024 <a href="https://treehillstudio.com">Treehill Studio</a>
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
  
  
  
  
  
  <a href="https://github.com/Jako" target="_blank" rel="noopener" title="github.com" class="md-social__link">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
  </a>
  
</div>
<div class="md-footer-logo">
  <a href="https://treehillstudio.com" class="md-footer-logo__link">
    <img src="../assets/images/treehill-studio-invers.svg">
  </a>
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>